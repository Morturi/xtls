<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.25">
    <link rel="icon" href="/logo.png"><title>Inbound Proxy | Project X</title><meta name="description" content="Official document of Xray">
    <link rel="preload" href="/assets/js/runtime~app.0dc9476c.js" as="script"><link rel="preload" href="/assets/css/styles.f4ef6178.css" as="style"><link rel="preload" href="/assets/js/3469.574b203c.js" as="script"><link rel="preload" href="/assets/js/app.a0c96b76.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.f4ef6178.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en/" class=""><!----><span class="site-name">Project X</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/en" class="nav-link router-link-active" aria-label="Homepage"><!--[--><!--]--> Homepage <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/about/news.md" class="nav-link" aria-label="Website History"><!--[--><!--]--> Website History <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/config/" class="nav-link router-link-active" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/development/" class="nav-link" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/document/" class="nav-link" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/config/inbound.html" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/en/config/inbound.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English (WIP)"><!--[--><!--]--> English (WIP) <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/xtls/xray-core" rel="noopener noreferrer" target="_blank" aria-label="Source"><!--[--><!--]--> Source <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/en" class="nav-link router-link-active" aria-label="Homepage"><!--[--><!--]--> Homepage <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/about/news.md" class="nav-link" aria-label="Website History"><!--[--><!--]--> Website History <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/config/" class="nav-link router-link-active" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/development/" class="nav-link" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/en/document/" class="nav-link" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/config/inbound.html" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/en/config/inbound.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English (WIP)"><!--[--><!--]--> English (WIP) <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/xtls/xray-core" rel="noopener noreferrer" target="_blank" aria-label="Source"><!--[--><!--]--> Source <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Xray Features</p><ul class=""><li><!--[--><a href="/en/config/features/xtls.html" class="nav-link sidebar-item" aria-label="Deep analysis of XTLS"><!--[--><!--]--> Deep analysis of XTLS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/features/fallback.html" class="nav-link sidebar-item" aria-label="Fallback"><!--[--><!--]--> Fallback <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/features/browser_dialer.html" class="nav-link sidebar-item" aria-label="Browser Dialer"><!--[--><!--]--> Browser Dialer <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/features/env.html" class="nav-link sidebar-item" aria-label="Environment Variables"><!--[--><!--]--> Environment Variables <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/features/multiple.html" class="nav-link sidebar-item" aria-label="Multi-file configuration"><!--[--><!--]--> Multi-file configuration <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Config Reference</p><ul class=""><li><!--[--><a href="/en/config/" class="nav-link router-link-active sidebar-item" aria-label="Configurations"><!--[--><!--]--> Configurations <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/log.html" class="nav-link sidebar-item" aria-label="Log Configuration"><!--[--><!--]--> Log Configuration <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/api.html" class="nav-link sidebar-item" aria-label="API Interface"><!--[--><!--]--> API Interface <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/dns.html" class="nav-link sidebar-item" aria-label="Built-in DNS Server"><!--[--><!--]--> Built-in DNS Server <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/fakedns.html" class="nav-link sidebar-item" aria-label="FakeDNS"><!--[--><!--]--> FakeDNS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/en/config/inbound.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Inbound Proxy"><!--[--><!--]--> Inbound Proxy <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/en/config/inbound.html#inboundobject" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="InboundObject"><!--[--><!--]--> InboundObject <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/en/config/inbound.html#sniffingobject" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="SniffingObject"><!--[--><!--]--> SniffingObject <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/en/config/inbound.html#allocateobject" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="AllocateObject"><!--[--><!--]--> AllocateObject <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/en/config/outbound.html" class="nav-link sidebar-item" aria-label="Outbound Proxies"><!--[--><!--]--> Outbound Proxies <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/policy.html" class="nav-link sidebar-item" aria-label="Local Policy"><!--[--><!--]--> Local Policy <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/reverse.html" class="nav-link sidebar-item" aria-label="Reverse Proxy"><!--[--><!--]--> Reverse Proxy <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/routing.html" class="nav-link sidebar-item" aria-label="Routing"><!--[--><!--]--> Routing <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/stats.html" class="nav-link sidebar-item" aria-label="Traffic Statistics"><!--[--><!--]--> Traffic Statistics <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transport.html" class="nav-link sidebar-item" aria-label="Transport Protocol"><!--[--><!--]--> Transport Protocol <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Inbound Protocol</p><ul class=""><li><!--[--><a href="/en/config/inbounds/dokodemo.html" class="nav-link sidebar-item" aria-label="Dokodemo-Door"><!--[--><!--]--> Dokodemo-Door <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/http.html" class="nav-link sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/shadowsocks.html" class="nav-link sidebar-item" aria-label="Shadowsocks"><!--[--><!--]--> Shadowsocks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/socks.html" class="nav-link sidebar-item" aria-label="SOCKS"><!--[--><!--]--> SOCKS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/trojan.html" class="nav-link sidebar-item" aria-label="Trojan"><!--[--><!--]--> Trojan <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/vless.html" class="nav-link sidebar-item" aria-label="VLESS"><!--[--><!--]--> VLESS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/inbounds/vmess.html" class="nav-link sidebar-item" aria-label="VMess"><!--[--><!--]--> VMess <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Outbound Protocol</p><ul class=""><li><!--[--><a href="/en/config/outbounds/blackhole.html" class="nav-link sidebar-item" aria-label="Blackhole"><!--[--><!--]--> Blackhole <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/dns.html" class="nav-link sidebar-item" aria-label="DNS"><!--[--><!--]--> DNS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/freedom.html" class="nav-link sidebar-item" aria-label="Freedom"><!--[--><!--]--> Freedom <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/http.html" class="nav-link sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/shadowsocks.html" class="nav-link sidebar-item" aria-label="Shadowsocks"><!--[--><!--]--> Shadowsocks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/socks.html" class="nav-link sidebar-item" aria-label="Socks"><!--[--><!--]--> Socks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/trojan.html" class="nav-link sidebar-item" aria-label="Trojan"><!--[--><!--]--> Trojan <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/vless.html" class="nav-link sidebar-item" aria-label="VLESS"><!--[--><!--]--> VLESS <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/vmess.html" class="nav-link sidebar-item" aria-label="VMess"><!--[--><!--]--> VMess <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/outbounds/wireguard.html" class="nav-link sidebar-item" aria-label="Wireguard"><!--[--><!--]--> Wireguard <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Stream Transport Protocol</p><ul class=""><li><!--[--><a href="/en/config/transports/grpc.html" class="nav-link sidebar-item" aria-label="gRPC"><!--[--><!--]--> gRPC <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transports/h2.html" class="nav-link sidebar-item" aria-label="HTTP/2"><!--[--><!--]--> HTTP/2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transports/mkcp.html" class="nav-link sidebar-item" aria-label="mKCP"><!--[--><!--]--> mKCP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transports/quic.html" class="nav-link sidebar-item" aria-label="QUIC"><!--[--><!--]--> QUIC <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transports/tcp.html" class="nav-link sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/en/config/transports/websocket.html" class="nav-link sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="inbound-proxy" tabindex="-1"><a class="header-anchor" href="#inbound-proxy" aria-hidden="true">#</a> Inbound Proxy</h1><p>Inbound connections are used to receive incoming data and the available protocols are listed in <a href="/en/config/inbounds/" class="">inbound protocols</a>.</p><h2 id="inboundobject" tabindex="-1"><a class="header-anchor" href="#inboundobject" aria-hidden="true">#</a> InboundObject</h2><p>The <code>InboundObject</code> corresponds to a subelement of the <code>inbounds</code> item in the configuration file.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;listen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">1080</span><span class="token punctuation">,</span>
      <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;protocol_name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;streamSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sniffing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;destOverride&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tls&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allocate&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;refresh&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token property">&quot;concurrency&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p><code>listen</code>: address</p></blockquote><p>The listening address, either an IP address or a Unix domain socket. The default value is <code>&quot;0.0.0.0&quot;</code>, which means accepting connections on all network interfaces.</p><p>An available system IP address can be specified.</p><p>Unix domain socket can also be specified by providing the absolute path in the form of <code>&quot;/dev/shm/domain.socket&quot;</code>. The <code>@</code> symbol can be added at the beginning to represent <a href="https://www.man7.org/linux/man-pages/man7/unix.7.html" target="_blank" rel="noopener noreferrer">abstract<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>, and <code>@@</code> represents padded abstract.</p><p>When Unix domain socket is specified, <code>port</code> and <code>allocate</code> will be ignored. The protocol currently supports VLESS, VMess, and Trojan. The transport methods available are TCP, WebSocket, HTTP/2, and gRPC.</p><p>When specifying a Unix domain socket, you can add a comma and an access permission indicator after the socket, such as <code>&quot;/dev/shm/domain.socket,0666&quot;</code>, to specify the access permission of the socket. This can be used to solve the socket access permission issue that occurs by default.</p><blockquote><p><code>port</code>: number | &quot;env:variable&quot; | string</p></blockquote><p>Port. The accepted formats are:</p><ul><li>Integer: the actual port number.</li><li>Environment variable: starts with <code>&quot;env:&quot;</code>, followed by the name of an environment variable, such as <code>&quot;env:PORT&quot;</code>. Xray will parse this environment variable as a string.</li><li>String: can be a numeric string, such as <code>&quot;1234&quot;</code>, or a range of port numbers, such as <code>&quot;5-10&quot;</code> which represents ports 5 through 10, a total of 6 ports. You can use commas to separate multiple ranges, such as <code>11,13,15-17</code>, which represents ports 11, 13, and 15 through 17, a total of 5 ports.</li></ul><p>When only one port is specified, Xray listens for inbound connections on that port. When a range of ports is specified, it depends on the <code>allocate</code> setting.</p><blockquote><p><code>protocol</code>: string</p></blockquote><p>The connection protocol name. The optional protocol types are listed in <a href="/en/config/inbounds/" class="">inbound protocols</a>.</p><blockquote><p><code>settings</code>: InboundConfigurationObject</p></blockquote><p>The specific configuration content depends on the protocol. See <code>InboundConfigurationObject</code> in each protocol for details.</p><blockquote><p><code>streamSettings</code>: <a href="/en/config/transport.html#streamsettingsobject" class="">StreamSettingsObject</a></p></blockquote><p>The underlying transport method is how the current Xray node interfaces with other nodes.</p><blockquote><p><code>tag</code>: string</p><p>The identifier of this inbound connection, used to locate this connection in other configurations.</p></blockquote><div class="custom-container danger"><p class="custom-container-title">Danger</p><p>When it is not empty, its value must be <strong>unique</strong> among all <code>tag</code>s.</p></div><blockquote><p><code>sniffing</code>: <a href="#sniffingobject">SniffingObject</a></p></blockquote><p>Traffic sniffing is mainly used in transparent proxies, for example:</p><ol><li>If a device wants to access <code>abc.com</code> while connected to the internet, it will first query the IP address of <code>abc.com</code> via DNS and get <code>1.2.3.4</code>. Then the device will initiate a connection to <code>1.2.3.4</code>.</li><li>If sniffing is not set up, Xray will receive a connection request for <code>1.2.3.4</code>, which cannot be used for routing based on domain rules.</li><li>When <code>enable</code> in <code>sniffing</code> is set to <code>true</code>, Xray will sniff the domain name, <code>abc.com</code>, from the traffic data when processing the traffic of this connection.</li><li>Xray will reset <code>1.2.3.4</code> to <code>abc.com</code>. Routing can then be based on domain rules.</li></ol><p>Since the connection is now to <code>abc.com</code>, more can be done, such as routing based on domain rules, and even re-resolving the DNS.</p><p>When <code>enable</code> in <code>sniffing</code> is set to <code>true</code>, it can also sniff out bittorrent traffic and then configure the &quot;protocol&quot; item in routing rules to handle bittorrent traffic, such as intercepting bittorrent traffic on the server or forwarding bittorrent traffic to a VPS on the client side.</p><blockquote><p><code>allocate</code>: <a href="#allocateobject">AllocateObject</a></p></blockquote><p>Specifies the specific settings for port allocation when multiple ports are set up.</p><h3 id="sniffingobject" tabindex="-1"><a class="header-anchor" href="#sniffingobject" aria-hidden="true">#</a> SniffingObject</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;destOverride&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;quic&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fakedns&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fakedns+others&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;metadataOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;domainsExcluded&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;routeOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><code>enabled</code>: true | false</p></blockquote><p>Whether to enable traffic sniffing.</p><blockquote><p><code>destOverride</code>: [&quot;http&quot; | &quot;tls&quot; | &quot;quic&quot; | &quot;fakedns&quot; | &quot;fakedns+others&quot; ]</p></blockquote><p>When the traffic is of a specified type, reset the destination of the current connection to the target address included in the list.</p><p><code>[&quot;fakedns+others&quot;]</code> is equivalent to <code>[&quot;http&quot;, &quot;tls&quot;, &quot;quic&quot;, &quot;fakedns&quot;]</code>, and when the IP address is in the FakeIP range but no domain records are hit, <code>http</code>, <code>tls</code>, and <code>quic</code> will be used for matching. This option is only effective when <code>metadataOnly</code> is set to <code>false</code>.</p><blockquote><p><code>metadataOnly</code>: true | false</p></blockquote><p>When enabled, only use the connection&#39;s metadata to sniff the target address. In this case, sniffer other than <code>fakedns</code> (including <code>fakedns+others</code>) cannot be activated.</p><p>If metadata-only is disabled, the client must send data before the proxy server actually establishes the connection. This behavior is incompatible with protocols that require the server to initiate the first message, such as the SMTP protocol.</p><blockquote><p><code>domainsExcluded</code>: [string] <span class="badge warning" style=""><!--[-->WIP<!--]--></span></p></blockquote><p>A list of domain names. If the traffic sniffing result matches a domain name in this list, the target address will <strong>not</strong> be reset.</p><div class="custom-container warning"><p class="custom-container-title">Warning</p><p>Currently, <code>domainsExcluded</code> does not support domain name matching in the routing sense. This option may change in the future and cross-version compatibility is not guaranteed.</p></div><blockquote><p><code>routeOnly</code>: true | false</p></blockquote><p>Use the sniffed domain name for routing only, and keep the target address as the IP address. The default value is <code>false</code>.</p><p>This option requires <code>destOverride</code> to be enabled.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>When it is possible to ensure that <strong>the proxied connection can obtain correct DNS resolution</strong>, by using <code>routeOnly</code> and enabling <code>destOverride</code>, and setting the routing matching strategy <code>domainStrategy</code> to <code>AsIs</code>, it is possible to achieve domain and IP separation without DNS resolution throughout the process. The IP used when encountering an IP rule match is the original IP of the domain.</p></div><h3 id="allocateobject" tabindex="-1"><a class="header-anchor" href="#allocateobject" aria-hidden="true">#</a> AllocateObject</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;strategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refresh&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token property">&quot;concurrency&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><code>strategy</code>: &quot;always&quot; | &quot;random&quot;</p></blockquote><p>The port allocation strategy.</p><ul><li><code>&quot;always&quot;</code> means all specified ports in <code>port</code> will be allocated, and Xray will listen on these ports.</li><li><code>&quot;random&quot;</code> means ports will be randomly selected from the <code>port</code> range every <code>refresh</code> minutes, and <code>concurrency</code> ports will be listened on.</li></ul><blockquote><p><code>refresh</code>: number</p></blockquote><p>The interval for refreshing randomly allocated ports in minutes. The minimum value is <code>2</code>, and it is recommended to set to <code>5</code>. This property is only effective when <code>strategy</code> is set to <code>&quot;random&quot;</code>.</p><blockquote><p><code>concurrency</code>: number</p></blockquote><p>The number of randomly allocated ports. The minimum value is <code>1</code>, and the maximum value is one-third of the <code>port</code> range. It is recommended to set to <code>3</code>.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/xtls/Xray-docs-next/edit/main/docs/en/config/inbound.md" rel="noopener noreferrer" target="_blank" aria-label="Help us improve this page on GitHub！"><!--[--><!--]--> Help us improve this page on GitHub！ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">3/12/2023, 1:44:54 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 126307318+Winston2084@users.noreply.github.com">Winston2084</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 82594500+hmol233@users.noreply.github.com">hmol233</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 34030394+xqzr@users.noreply.github.com">xqzr</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 1588741+yuhan6665@users.noreply.github.com">yuhan6665</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/en/config/fakedns.html" class="nav-link" aria-label="FakeDNS"><!--[--><!--]--> FakeDNS <!--[--><!--]--></a></span><span class="next"><a href="/en/config/outbound.html" class="nav-link" aria-label="Outbound Proxies"><!--[--><!--]--> Outbound Proxies <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.0dc9476c.js" defer></script><script src="/assets/js/3469.574b203c.js" defer></script><script src="/assets/js/app.a0c96b76.js" defer></script>
  </body>
</html>
