"use strict";(self.webpackChunkXray_docs_next=self.webpackChunkXray_docs_next||[]).push([[3177],{6956:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-110dd688",path:"/en/document/level-1/fallbacks-with-sni.html",title:"SNI 回落",lang:"en-US",frontmatter:{title:"SNI 回落"},excerpt:"",headers:[{level:2,title:"应用情景",slug:"应用情景",children:[]},{level:2,title:"SNI 简介",slug:"sni-简介",children:[]},{level:2,title:"思路",slug:"思路",children:[]},{level:2,title:"添加 DNS 记录",slug:"添加-dns-记录",children:[]},{level:2,title:"申请 TLS 证书",slug:"申请-tls-证书",children:[]},{level:2,title:"Xray 配置",slug:"xray-配置",children:[]},{level:2,title:"Nginx 配置",slug:"nginx-配置",children:[]},{level:2,title:"Caddy 配置",slug:"caddy-配置",children:[]},{level:2,title:"参考",slug:"参考",children:[]},{level:2,title:"引用",slug:"引用",children:[]}],filePathRelative:"en/document/level-1/fallbacks-with-sni.md",git:{updatedTime:1672074762e3,contributors:[{name:"hmol233",email:"82594500+hmol233@users.noreply.github.com",commits:1},{name:"yuhan6665",email:"1588741+yuhan6665@users.noreply.github.com",commits:1}]}}},7385:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Qn});var e=a(6252),l=a(7015),t=a(6568),r=a(5087);const o=(0,e._)("h1",{id:"通过-sni-回落功能实现伪装与按域名分流",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#通过-sni-回落功能实现伪装与按域名分流","aria-hidden":"true"},"#"),(0,e.Uk)(" 通过 SNI 回落功能实现伪装与按域名分流")],-1),p=(0,e._)("p",null,"VLESS 是一种很轻的协议，和 Trojan 一样，不对流量进行复杂的加密和混淆，而是大隐隐于市，通过 TLS 协议加密，混杂在其他 HTTPS 流量中，在墙内外穿进穿出。为了更好的伪装以应对主动探测，Fallbacks 回落功能随 VLESS 同时出现。这篇教程将演示如何使用 Xray 中 VLESS 入站协议的回落功能配合 Nginx 或 Caddy 在保证伪装完全的前提下实现按域名分流。",-1),c=(0,e._)("h2",{id:"应用情景",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#应用情景","aria-hidden":"true"},"#"),(0,e.Uk)(" 应用情景")],-1),_=(0,e._)("p",null,"由于 XTLS，Xray 需要监听 443 端口，这导致如果之前有网站运行在服务器上，那么此时网站无法运行或需要运行在其他端口上，这显然是不合理的。有以下三种方案可以解决这个问题：",-1),k=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("p",null,"Xray 监听其他常用端口（如 22、3389、8443）"),(0,e._)("p",null,"这个方案是最简单的，但不够完美。")]),(0,e._)("li",null,[(0,e._)("p",null,"Nginx 或 HAProxy 监听 443 端口，通过 SNI 分流做 L4 反向代理，实现端口复用"),(0,e._)("p",null,"这个方案比较复杂，需要对 Nginx 或 HAProxy 的使用有一定了解，此处不作过多解释。")]),(0,e._)("li",null,[(0,e._)("p",null,"Xray 监听 443 端口，通过 Fallbacks 功能 SNI 分流将网站流量回落到 Nginx 或 Caddy"),(0,e._)("p",null,"这个方案难度适中，也是此教程接下来想要演示的方案。")])],-1),i=(0,e._)("h2",{id:"sni-简介",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#sni-简介","aria-hidden":"true"},"#"),(0,e.Uk)(" SNI 简介")],-1),u=(0,e._)("p",null,[(0,e.Uk)("服务器名称指示（英语："),(0,e._)("strong",null,"S"),(0,e.Uk)("erver "),(0,e._)("strong",null,"N"),(0,e.Uk)("ame "),(0,e._)("strong",null,"I"),(0,e.Uk)("ndication，缩写："),(0,e._)("strong",null,"SNI"),(0,e.Uk)("）是 TLS 的一个扩展协议。熟悉反向代理的朋友都知道，如果想要通过域名将流量代理到正确的内容上，需要以下配置：")],-1),b=(0,e._)("div",{class:"language-nginx ext-nginx line-numbers-mode"},[(0,e._)("pre",{class:"language-nginx"},[(0,e._)("code",null,[(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"proxy_set_header"),(0,e.Uk)(" Host 主机名")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br")])],-1),A=(0,e._)("p",null,"这句的作用是将名为 “Host” 的 HTTP Header 设定为某个主机名。为什么要这样做？一般而言，一台服务器对应一个 IP，但却运行多个网站，访问者通过域名查询到 IP 以访问服务器，那么问题来了，如何确定访问者想要访问的是哪一个网站？这需要“基于名称的虚拟主机”。",-1),m=(0,e._)("p",null,"当 Web 服务器收到访问请求后，它会查看请求的主机头，使访问者访问正确的网站。然而当 HTTP 协议被 TLS 协议加密后，这种简单的方法就无法实现了。因为 TLS 握手发生在服务器看到任何 HTTP 头之前，因此，服务器不可能使用 HTTP 主机头中的信息来决定呈现哪个证书，更无法决定访问者的访问目标。",-1),d=(0,e._)("p",null,[(0,e.Uk)("SNI 的原理也很简单，它通过让客户端发送主机名作为 TLS 协商的一部分来解决此问题。所以在使用 Nginx 对 HTTPS 协议进行反向代理时，需要在配置中加入 "),(0,e._)("code",null,"proxy_ssl_server_name on;"),(0,e.Uk)("，此时 Nginx 会向被代理的服务器发送 SNI 信息，解决了 HTTPS 协议下虚拟主机失效的问题。另外，使用 SNI 时，即使不指定主机头，也可以正确访问网站。")],-1),U=(0,e._)("h2",{id:"思路",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#思路","aria-hidden":"true"},"#"),(0,e.Uk)(" 思路")],-1),f=(0,e._)("p",null,[(0,e._)("img",{src:l,alt:"Xray 回落流程"})],-1),g=(0,e._)("p",null,"从 443 端口接收到流量后，Xray 会把 TLS 解密后首包长度 < 18、协议版本无效或身份认证失败的流量通过对 name、path、alpn 的匹配转发到 dest 指定的地址。",-1),h=(0,e._)("h2",{id:"添加-dns-记录",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#添加-dns-记录","aria-hidden":"true"},"#"),(0,e.Uk)(" 添加 DNS 记录")],-1),y=(0,e._)("p",null,[(0,e._)("img",{src:t,alt:"DNS 记录"})],-1),v=(0,e._)("p",null,"请按实际情况修改域名和 IP。",-1),x=(0,e._)("h2",{id:"申请-tls-证书",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#申请-tls-证书","aria-hidden":"true"},"#"),(0,e.Uk)(" 申请 TLS 证书")],-1),S=(0,e.Uk)("由于要对不同前缀的域名进行分流，但一个通配符证书的作用域仅限于两“.”之间（例如：申请 "),P=(0,e._)("code",null,"*.example.com",-1),T=(0,e.Uk)("，"),w=(0,e._)("code",null,"example.com",-1),X=(0,e.Uk)(" 和 "),C=(0,e._)("code",null,"*.*.example.com",-1),E=(0,e.Uk)(" 并不能使用该证书），故需申请 "),J={href:"https://zh.wikipedia.org/wiki/%E4%B8%BB%E9%A2%98%E5%A4%87%E7%94%A8%E5%90%8D%E7%A7%B0",target:"_blank",rel:"noopener noreferrer"},N=(0,e.Uk)("SAN"),I=(0,e.Uk)(" 通配符证书。根据 Let's Encrypt 官网信息"),L=(0,e._)("sup",{class:"footnote-ref"},[(0,e._)("a",{href:"#fn1",id:"fnref1"},"[1]")],-1),V=(0,e.Uk)("，申请通配符证书要求 DNS-01 验证方式，此处演示 NS 记录为 Cloudflare 的域名通过 "),z={href:"https://acme.sh",target:"_blank",rel:"noopener noreferrer"},j=(0,e.Uk)("acme.sh"),B=(0,e.Uk)(" 申请 Let's Encrypt 的免费 TLS 证书。使用其他域名托管商的申请方法请阅读 "),W={href:"https://github.com/acmesh-official/acme.sh/wiki/dnsapi",target:"_blank",rel:"noopener noreferrer"},H=(0,e.Uk)("dnsapi · acmesh-official/acme.sh Wiki"),q=(0,e.Uk)("。"),Z=(0,e.Uk)("首先需要到 "),R={href:"https://dash.cloudflare.com/profile/api-tokens",target:"_blank",rel:"noopener noreferrer"},D=(0,e.Uk)("Cloudflare 面板"),Y=(0,e.Uk)("创建 API Token。参数如下："),K=(0,e._)("p",null,[(0,e._)("img",{src:r,alt:"API Token 的权限设置"})],-1),M=(0,e._)("p",null,"权限部分至关重要，其他部分任意。",-1),O=(0,e._)("p",null,[(0,e.Uk)("创建完毕后，你会得到一串神秘字符，请将其妥善保管到安全且不会丢失的地方，因为它不再会显示。这串字符就是即将用到的 "),(0,e._)("code",null,"CF_Token"),(0,e.Uk)("。")],-1),Q=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"注意"),(0,e._)("p",null,"以下操作需要在 root 用户下进行，使用 sudo 会出现错误。")],-1),F=(0,e._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e._)("pre",{class:"language-bash"},[(0,e._)("code",null,[(0,e._)("span",{class:"token function"},"curl"),(0,e.Uk)(" https://get.acme.sh "),(0,e._)("span",{class:"token operator"},"|"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"sh"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"# 安装 acme.sh"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token builtin class-name"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token assign-left variable"},"CF_Token"),(0,e._)("span",{class:"token operator"},"="),(0,e._)("span",{class:"token string"},'"sdfsdfsdfljlbjkljlkjsdfoiwje"'),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"# 设定 API Token 变量"),(0,e.Uk)("\nacme.sh --issue -d example.com -d *.example.com --dns dns_cf "),(0,e._)("span",{class:"token comment"},"# 使用 DNS-01 验证方式申请证书"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token function"},"mkdir"),(0,e.Uk)(" /etc/ssl/xray "),(0,e._)("span",{class:"token comment"},"# 新建证书存放目录"),(0,e.Uk)("\nacme.sh --install-cert -d example.com --fullchain-file /etc/ssl/xray/cert.pem --key-file /etc/ssl/xray/privkey.key --reloadcmd "),(0,e._)("span",{class:"token string"},'"chown nobody:nogroup -R /etc/ssl/xray && systemctl restart xray"'),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"# 安装证书到指定目录并设定自动续签生效指令"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br")])],-1),G=(0,e._)("h2",{id:"xray-配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#xray-配置","aria-hidden":"true"},"#"),(0,e.Uk)(" Xray 配置")],-1),$=(0,e._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,e._)("pre",{class:"language-json"},[(0,e._)("code",null,[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},'"log"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token property"},'"loglevel"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"warning"'),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},'"inbounds"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"port"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"443"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"protocol"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"vless"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"settings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"clients"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"id"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"UUID"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"flow"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"xtls-rprx-vision"'),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"decryption"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"none"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"fallbacks"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"name"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"example.com"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"path"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"/vmessws"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5000"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5001"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"alpn"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"h2"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5002"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"name"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"blog.example.com"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5003"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"name"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"blog.example.com"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"alpn"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"h2"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5004"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"streamSettings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"network"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"tcp"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"security"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"tls"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"tlsSettings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token property"},'"alpn"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e._)("span",{class:"token string"},'"h2"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"http/1.1"'),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token property"},'"certificates"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n              "),(0,e._)("span",{class:"token property"},'"certificateFile"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"/etc/ssl/xray/cert.pem"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n              "),(0,e._)("span",{class:"token property"},'"keyFile"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"/etc/ssl/xray/privkey.key"'),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"listen"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"127.0.0.1"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"port"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5000"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"protocol"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"vmess"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"settings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"clients"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n            "),(0,e._)("span",{class:"token property"},'"id"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"UUID"'),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"streamSettings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"network"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"ws"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token property"},'"wsSettings"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token property"},'"acceptProxyProtocol"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token property"},'"path"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"/vmessws"'),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},'"outbounds"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"protocol"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"freedom"'),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"32"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"33"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"34"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"35"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"36"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"37"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"38"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"39"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"40"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"41"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"42"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"43"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"44"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"45"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"46"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"47"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"48"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"49"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"50"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"51"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"52"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"53"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"54"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"55"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"56"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"57"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"58"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"59"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"60"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"61"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"62"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"63"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"64"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"65"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"66"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"67"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"68"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"69"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"70"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"71"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"72"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"73"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"74"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"75"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"76"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"77"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"78"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"79"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"80"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"81"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"82"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"83"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"84"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"85"),(0,e._)("br")])],-1),nn=(0,e._)("p",null,"以上配置针对于 Nginx，以下是需要注意的一些细节。",-1),sn=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("p",null,"有关 Proxy Protocol"),(0,e._)("p",null,"Proxy Protocol 是 HaProxy 开发的一种旨在解决代理时容易丢失客户端信息问题的协议，常用于链式代理和反向代理。传统的处理方法往往较为复杂且有诸多限制，而 Proxy Protocol 非常简单地在传输数据时附带上原始连接四元组信息的数据包，解决了这个问题。"),(0,e._)("p",null,"凡事皆有利弊，Proxy Protocol 也是如此。"),(0,e._)("ul",null,[(0,e._)("li",null,"有发送必须有接收，反之亦然"),(0,e._)("li",null,[(0,e.Uk)("同一端口不能既兼容带 Proxy Protocol 数据的连接又兼容不带数据的连接（如：Nginx 同端口的不同虚拟主机（server），本质是上一条）"),(0,e._)("sup",{class:"footnote-ref"},[(0,e._)("a",{href:"#fn2",id:"fnref2"},"[2]")]),(0,e._)("sup",{class:"footnote-ref"},[(0,e._)("a",{href:"#fn3",id:"fnref3"},"[3]")])])]),(0,e._)("p",null,"在遇到异常时，请考虑配置是否符合上述条件。"),(0,e._)("p",null,"此处，我们使用 Proxy Protocol 让被回落到的目标获取到客户端的真实 IP。"),(0,e._)("p",null,[(0,e.Uk)("另外，当 Xray 的某个入站配置存在 "),(0,e._)("code",null,'"acceptProxyProtocol": true'),(0,e.Uk)(" 时，ReadV 将失效。")])]),(0,e._)("li",null,[(0,e._)("p",null,"有关 HTTP/2"),(0,e._)("p",null,[(0,e.Uk)("首先，"),(0,e._)("code",null,"inbounds.streamSettings.tlsSettings.alpn"),(0,e.Uk)(" 有顺序，应将 "),(0,e._)("code",null,"h2"),(0,e.Uk)(" 放前，"),(0,e._)("code",null,"http/1.1"),(0,e.Uk)(" 放后，在优先使用 HTTP/2 的同时保证兼容性；反过来会导致 HTTP/2 在协商时变为 HTTP/1.1，成为无效配置。")]),(0,e._)("p",null,[(0,e.Uk)("在上述配置中，每条回落到 Nginx 的配置都要分成两个。这是因为 h2 是强制 TLS 加密的 HTTP/2 连接，这有益于数据在互联网中传输的安全，但在服务器内部没有必要；而 h2c 是非加密的 HTTP/2 连接，适合该环境。然而，Nginx 不能在同一端口上同时监听 HTTP/1.1 和 h2c，为了解决这个问题，需要在回落中指定 "),(0,e._)("code",null,"alpn"),(0,e.Uk)(" 项（是 "),(0,e._)("code",null,"fallbacks"),(0,e.Uk)(" 而不是 "),(0,e._)("code",null,"tlsSettings"),(0,e.Uk)(" 里面的），以尝试匹配 TLS ALPN 协商结果。")]),(0,e._)("p",null,[(0,e.Uk)("建议 "),(0,e._)("code",null,"alpn"),(0,e.Uk)(" 项只按需用两种填法："),(0,e._)("sup",{class:"footnote-ref"},[(0,e._)("a",{href:"#fn4",id:"fnref4"},"[4]")])]),(0,e._)("ul",null,[(0,e._)("li",null,"省略"),(0,e._)("li",null,[(0,e._)("code",null,'"h2"')])]),(0,e._)("p",null,[(0,e.Uk)("如果使用 Caddy 就大可不必如此繁杂了，因为它"),(0,e._)("strong",null,"可以"),(0,e.Uk)("在同一端口上同时监听 HTTP/1.1 和 h2c，配置改动如下：")]),(0,e._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,e._)("pre",{class:"language-json"},[(0,e._)("code",null,[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token property"},'"fallbacks"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"name"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"example.com"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"path"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"/vmessws"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5000"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5001"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"name"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"blog.example.com"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"dest"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5002"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token property"},'"xver"'),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"1"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br")])])])],-1),an=(0,e._)("h2",{id:"nginx-配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#nginx-配置","aria-hidden":"true"},"#"),(0,e.Uk)(" Nginx 配置")],-1),en=(0,e._)("p",null,"Nginx 将通过官方源进行安装。",-1),ln=(0,e._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e._)("pre",{class:"language-bash"},[(0,e._)("code",null,[(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"apt"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"install"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"curl"),(0,e.Uk)(" gnupg2 ca-certificates lsb-release\n"),(0,e._)("span",{class:"token builtin class-name"},"echo"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},[(0,e.Uk)('"deb [arch=amd64] http://nginx.org/packages/ubuntu '),(0,e._)("span",{class:"token variable"},[(0,e._)("span",{class:"token variable"},"`"),(0,e.Uk)("lsb_release -cs"),(0,e._)("span",{class:"token variable"},"`")]),(0,e.Uk)(' nginx"')]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"\\"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token operator"},"|"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"tee"),(0,e.Uk)(" /etc/apt/sources.list.d/nginx.list\n"),(0,e._)("span",{class:"token function"},"curl"),(0,e.Uk)(" -fsSL https://nginx.org/keys/nginx_signing.key "),(0,e._)("span",{class:"token operator"},"|"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(" apt-key "),(0,e._)("span",{class:"token function"},"add"),(0,e.Uk)(" -\n"),(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"apt"),(0,e.Uk)(" update\n"),(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"apt"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"install"),(0,e.Uk)(" nginx\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br")])],-1),tn=(0,e._)("p",null,[(0,e.Uk)("删除 "),(0,e._)("code",null,"/etc/nginx/conf.d/default.conf"),(0,e.Uk)(" 并创建 "),(0,e._)("code",null,"/etc/nginx/conf.d/fallbacks.conf"),(0,e.Uk)("，内容如下：")],-1),rn=(0,e._)("div",{class:"language-nginx ext-nginx line-numbers-mode"},[(0,e._)("pre",{class:"language-nginx"},[(0,e._)("code",null,[(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"set_real_ip_from"),(0,e.Uk)(" 127.0.0.1")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"real_ip_header"),(0,e.Uk)(" proxy_protocol")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"server")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"listen"),(0,e.Uk)(" 127.0.0.1:5001 proxy_protocol default_server")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"listen"),(0,e.Uk)(" 127.0.0.1:5002 proxy_protocol default_server http2")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"location"),(0,e.Uk)(" /")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"root"),(0,e.Uk)(" /srv/http/default")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"server")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"listen"),(0,e.Uk)(" 127.0.0.1:5003 proxy_protocol")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"listen"),(0,e.Uk)(" 127.0.0.1:5004 proxy_protocol http2")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"server_name"),(0,e.Uk)(" blog.example.com")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"location"),(0,e.Uk)(" /")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"root"),(0,e.Uk)(" /srv/http/blog.example.com")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"server")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"listen"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"80")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token directive"},[(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"301"),(0,e.Uk)(" https://"),(0,e._)("span",{class:"token variable"},"$host"),(0,e._)("span",{class:"token variable"},"$request_uri")]),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br")])],-1),on=(0,e._)("h2",{id:"caddy-配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#caddy-配置","aria-hidden":"true"},"#"),(0,e.Uk)(" Caddy 配置")],-1),pn=(0,e.Uk)("安装 Caddy 请参阅 "),cn={href:"https://caddyserver.com/docs/install",target:"_blank",rel:"noopener noreferrer"},_n=(0,e.Uk)("Install — Caddy Documentation"),kn=(0,e.Uk)("。"),un=(0,e._)("p",null,"为了使 Caddy 能获取到访问者的真实 IP，需要编译带有 Proxy Protocol 模块的 Caddy。建议直接在 Caddy 官网上在线编译。",-1),bn=(0,e._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e._)("pre",{class:"language-bash"},[(0,e._)("code",null,[(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"curl"),(0,e.Uk)(" -o /usr/bin/caddy "),(0,e._)("span",{class:"token string"},'"https://caddyserver.com/api/download?os=linux&arch=amd64&p=github.com%2Fmastercactapus%2Fcaddy2-proxyprotocol&idempotency=79074247675458"'),(0,e.Uk)("\n"),(0,e._)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e._)("span",{class:"token function"},"chmod"),(0,e.Uk)(" +x /usr/bin/caddy\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br")])],-1),An=(0,e._)("p",null,"直接替换即可。",-1),mn=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"TIP"),(0,e._)("p",null,"建议先通过官网文档安装 Caddy，再替换二进制文件。这样做无需手动设定进程守护。")],-1),dn=(0,e._)("p",null,[(0,e.Uk)("编辑 "),(0,e._)("code",null,"/etc/caddy/Caddyfile"),(0,e.Uk)("：")],-1),Un=(0,e._)("div",{class:"language-Caddyfile ext-Caddyfile line-numbers-mode"},[(0,e._)("pre",{class:"language-Caddyfile"},[(0,e._)("code",null,"{\n    servers 127.0.0.1:5001 {\n        listener_wrappers {\n            proxy_protocol\n        }\n\tprotocol {\n            allow_h2c\n        }\n    }\n    servers 127.0.0.1:5002 {\n        listener_wrappers {\n            proxy_protocol\n        }\n\tprotocol {\n            allow_h2c\n        }\n    }\n}\n\n:5001 {\n    root * /srv/http/default\n    file_server\n    log\n    bind 127.0.0.1\n}\n\nhttp://blog.example.com:5002 {\n    root * /srv/http/blog.example.com\n    file_server\n    log\n    bind 127.0.0.1\n}\n\n:80 {\n    redir https://{host}{uri} permanent\n}\n")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"32"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"33"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"34"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"35"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"36"),(0,e._)("br")])],-1),fn=(0,e._)("h2",{id:"参考",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#参考","aria-hidden":"true"},"#"),(0,e.Uk)(" 参考")],-1),gn={href:"https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E7%A7%B0%E6%8C%87%E7%A4%BA",target:"_blank",rel:"noopener noreferrer"},hn=(0,e.Uk)("服务器名称指示 - 维基百科，自由的百科全书"),yn={href:"https://github.com/acmesh-official/acme.sh/wiki",target:"_blank",rel:"noopener noreferrer"},vn=(0,e.Uk)("Home · acmesh-official/acme.sh Wiki"),xn={href:"https://zh.wikipedia.org/wiki/HTTP/2",target:"_blank",rel:"noopener noreferrer"},Sn=(0,e.Uk)("HTTP/2 - 维基百科，自由的百科全书"),Pn=(0,e._)("h2",{id:"引用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#引用","aria-hidden":"true"},"#"),(0,e.Uk)(" 引用")],-1),Tn=(0,e._)("hr",{class:"footnotes-sep"},null,-1),wn={class:"footnotes"},Xn={class:"footnotes-list"},Cn={id:"fn1",class:"footnote-item"},En={href:"https://letsencrypt.org/zh-cn/docs/faq/",target:"_blank",rel:"noopener noreferrer"},Jn=(0,e.Uk)("常见问题 - Let's Encrypt - 免费的 SSL/TLS 证书"),Nn=(0,e.Uk)(),In=(0,e._)("a",{href:"#fnref1",class:"footnote-backref"},"↩︎",-1),Ln={id:"fn2",class:"footnote-item"},Vn={href:"https://www.haproxy.com/blog/haproxy/proxy-protocol/",target:"_blank",rel:"noopener noreferrer"},zn=(0,e.Uk)("Proxy Protocol - HAProxy Technologies"),jn=(0,e.Uk)(),Bn=(0,e._)("a",{href:"#fnref2",class:"footnote-backref"},"↩︎",-1),Wn={id:"fn3",class:"footnote-item"},Hn={href:"https://www.jianshu.com/p/cc8d592582c9",target:"_blank",rel:"noopener noreferrer"},qn=(0,e.Uk)("proxy protocol 介绍及 nginx 配置 - 简书"),Zn=(0,e.Uk)(),Rn=(0,e._)("a",{href:"#fnref3",class:"footnote-backref"},"↩︎",-1),Dn={id:"fn4",class:"footnote-item"},Yn={href:"https://github.com/rprx/v2fly-github-io/blob/master/docs/config/protocols/vless.md",target:"_blank",rel:"noopener noreferrer"},Kn=(0,e.Uk)("v2fly-github-io/vless.md at master · rprx/v2fly-github-io"),Mn=(0,e.Uk)(),On=(0,e._)("a",{href:"#fnref4",class:"footnote-backref"},"↩︎",-1),Qn={render:function(n,s){const a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[o,p,c,_,k,i,u,b,A,m,d,U,f,g,h,y,v,x,(0,e._)("p",null,[S,P,T,w,X,C,E,(0,e._)("a",J,[N,(0,e.Wm)(a)]),I,L,V,(0,e._)("a",z,[j,(0,e.Wm)(a)]),B,(0,e._)("a",W,[H,(0,e.Wm)(a)]),q]),(0,e._)("p",null,[Z,(0,e._)("a",R,[D,(0,e.Wm)(a)]),Y]),K,M,O,Q,F,G,$,nn,sn,an,en,ln,tn,rn,on,(0,e._)("p",null,[pn,(0,e._)("a",cn,[_n,(0,e.Wm)(a)]),kn]),un,bn,An,mn,dn,Un,fn,(0,e._)("ol",null,[(0,e._)("li",null,[(0,e._)("a",gn,[hn,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",yn,[vn,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",xn,[Sn,(0,e.Wm)(a)])])]),Pn,Tn,(0,e._)("section",wn,[(0,e._)("ol",Xn,[(0,e._)("li",Cn,[(0,e._)("p",null,[(0,e._)("a",En,[Jn,(0,e.Wm)(a)]),Nn,In])]),(0,e._)("li",Ln,[(0,e._)("p",null,[(0,e._)("a",Vn,[zn,(0,e.Wm)(a)]),jn,Bn])]),(0,e._)("li",Wn,[(0,e._)("p",null,[(0,e._)("a",Hn,[qn,(0,e.Wm)(a)]),Zn,Rn])]),(0,e._)("li",Dn,[(0,e._)("p",null,[(0,e._)("a",Yn,[Kn,(0,e.Wm)(a)]),Mn,On])])])])],64)}}},7015:(n,s,a)=>{n.exports=a.p+"assets/img/xray-fallbacks.f1e5890a.svg"},5087:n=>{n.exports="data:image/webp;base64,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"},6568:(n,s,a)=>{n.exports=a.p+"assets/img/xray-dns-records.2ea37bda.webp"}}]);